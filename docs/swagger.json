{
  "openapi": "3.1.0",
  "info": {
    "title": "Player Platform Suite API",
    "description": "A comprehensive gaming platform API providing authentication, progression tracking, leaderboards, messaging, commerce, and user-generated content management.",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@player-platform.example.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:4000",
      "description": "Development server"
    },
    {
      "url": "https://api.player-platform.example.com",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "Steam and Epic authentication endpoints"
    },
    {
      "name": "Progression",
      "description": "Player progression save/load operations"
    },
    {
      "name": "Leaderboards",
      "description": "Leaderboard and ranking endpoints"
    },
    {
      "name": "Messaging",
      "description": "System notifications and support threads"
    },
    {
      "name": "Commerce",
      "description": "SKU catalog, orders, and entitlements"
    },
    {
      "name": "UGC",
      "description": "User-generated content upload and discovery"
    },
    {
      "name": "Admin",
      "description": "Administrative endpoints"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "Health check endpoint",
        "description": "Returns the health status of the service",
        "tags": [],
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "summary": "Readiness check endpoint",
        "description": "Checks if all dependencies are ready",
        "tags": [],
        "responses": {
          "200": {
            "description": "Service is ready",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadinessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/steam/login": {
      "post": {
        "summary": "Authenticate with Steam",
        "description": "Authenticates a user using their Steam credentials and returns JWT tokens",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SteamLoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/epic/login": {
      "post": {
        "summary": "Authenticate with Epic Games",
        "description": "Authenticates a user using their Epic Games credentials and returns JWT tokens",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EpicLoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "summary": "Refresh access token",
        "description": "Refreshes the access token using a valid refresh token",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/revoke": {
      "post": {
        "summary": "Revoke token",
        "description": "Revokes a refresh token",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RevokeTokenRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token revoked successfully"
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "summary": "Logout user",
        "description": "Logs out the user and invalidates all tokens",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Logged out successfully"
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "summary": "Get current user",
        "description": "Returns the currently authenticated user's profile",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "User profile retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/profile": {
      "put": {
        "summary": "Update user profile",
        "description": "Updates the authenticated user's profile",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully"
          }
        }
      }
    },
    "/api/v1/auth/link/steam": {
      "post": {
        "summary": "Link Steam account",
        "description": "Links a Steam account to the current user",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SteamLoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Steam account linked successfully"
          }
        }
      }
    },
    "/api/v1/auth/link/epic": {
      "post": {
        "summary": "Link Epic account",
        "description": "Links an Epic Games account to the current user",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EpicLoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Epic account linked successfully"
          }
        }
      }
    },
    "/api/v1/auth/unlink/{provider}": {
      "delete": {
        "summary": "Unlink provider account",
        "description": "Unlinks an authentication provider from the current user",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "enum": ["STEAM", "EPIC"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Account unlinked successfully"
          }
        }
      }
    },
    "/api/v1/auth/linked-accounts": {
      "get": {
        "summary": "Get linked accounts",
        "description": "Returns all linked authentication accounts for the current user",
        "tags": ["Authentication"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Linked accounts retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LinkedAccountsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/progression/{userId}": {
      "get": {
        "summary": "Get player progression",
        "description": "Returns the player's progression data",
        "tags": ["Progression"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Progression data retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Progression"
                }
              }
            }
          },
          "404": {
            "description": "Progression not found"
          }
        }
      },
      "post": {
        "summary": "Save player progression",
        "description": "Saves the player's progression data with optimistic locking",
        "tags": ["Progression"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProgressionUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Progression saved successfully"
          },
          "409": {
            "description": "Version conflict"
          }
        }
      }
    },
    "/api/v1/progression/{userId}/history": {
      "get": {
        "summary": "Get progression history",
        "description": "Returns the player's progression history",
        "tags": ["Progression"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Progression history retrieved"
          }
        }
      }
    },
    "/api/v1/leaderboards": {
      "get": {
        "summary": "List leaderboard seasons",
        "description": "Returns all available leaderboard seasons",
        "tags": ["Leaderboards"],
        "responses": {
          "200": {
            "description": "Leaderboard seasons retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LeaderboardSeason"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create leaderboard season",
        "description": "Creates a new leaderboard season",
        "tags": ["Leaderboards"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLeaderboardSeasonRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Leaderboard season created"
          }
        }
      }
    },
    "/api/v1/leaderboards/{seasonId}/top": {
      "get": {
        "summary": "Get top players",
        "description": "Returns the top players on a leaderboard",
        "tags": ["Leaderboards"],
        "parameters": [
          {
            "name": "seasonId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Top players retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LeaderboardEntry"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/leaderboards/{seasonId}/rank/{userId}": {
      "get": {
        "summary": "Get player rank",
        "description": "Returns a player's rank on a leaderboard",
        "tags": ["Leaderboards"],
        "parameters": [
          {
            "name": "seasonId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Player rank retrieved"
          }
        }
      }
    },
    "/api/v1/leaderboards/{seasonId}/score": {
      "post": {
        "summary": "Submit score",
        "description": "Submits a score to the leaderboard",
        "tags": ["Leaderboards"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "seasonId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitScoreRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Score submitted successfully"
          }
        }
      }
    },
    "/api/v1/leaderboards/{seasonId}/entries/{userId}": {
      "delete": {
        "summary": "Remove leaderboard entry",
        "description": "Removes a player's entry from a leaderboard",
        "tags": ["Leaderboards"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "seasonId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Entry removed successfully"
          }
        }
      }
    },
    "/api/v1/messages": {
      "get": {
        "summary": "List messages",
        "description": "Returns the authenticated user's messages",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "unread",
            "in": "query",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Messages retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedMessagesResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Send message",
        "description": "Sends a message to a user",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendMessageRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent successfully"
          }
        }
      }
    },
    "/api/v1/messages/{messageId}": {
      "get": {
        "summary": "Get message",
        "description": "Returns a specific message",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "messageId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Message retrieved"
          },
          "404": {
            "description": "Message not found"
          }
        }
      }
    },
    "/api/v1/messages/{messageId}/read": {
      "put": {
        "summary": "Mark message as read",
        "description": "Marks a message as read",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "messageId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Message marked as read"
          }
        }
      }
    },
    "/api/v1/messages/read-all": {
      "put": {
        "summary": "Mark all messages as read",
        "description": "Marks all messages as read for the authenticated user",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "All messages marked as read"
          }
        }
      }
    },
    "/api/v1/support/threads": {
      "get": {
        "summary": "List support threads",
        "description": "Returns the authenticated user's support threads",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Support threads retrieved"
          }
        }
      },
      "post": {
        "summary": "Create support thread",
        "description": "Creates a new support thread",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSupportThreadRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Support thread created"
          }
        }
      }
    },
    "/api/v1/support/threads/{threadId}": {
      "get": {
        "summary": "Get support thread",
        "description": "Returns a specific support thread with messages",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "threadId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Support thread retrieved"
          },
          "404": {
            "description": "Thread not found"
          }
        }
      }
    },
    "/api/v1/support/threads/{threadId}/messages": {
      "post": {
        "summary": "Reply to support thread",
        "description": "Adds a message to a support thread",
        "tags": ["Messaging"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "threadId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReplySupportThreadRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Reply sent"
          }
        }
      }
    },
    "/api/v1/skus": {
      "get": {
        "summary": "List SKUs",
        "description": "Returns all available SKUs",
        "tags": ["Commerce"],
        "responses": {
          "200": {
            "description": "SKUs retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SKU"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create SKU",
        "description": "Creates a new SKU",
        "tags": ["Commerce"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSKURequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "SKU created"
          }
        }
      }
    },
    "/api/v1/skus/{skuId}": {
      "get": {
        "summary": "Get SKU",
        "description": "Returns a specific SKU",
        "tags": ["Commerce"],
        "parameters": [
          {
            "name": "skuId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SKU retrieved"
          },
          "404": {
            "description": "SKU not found"
          }
        }
      }
    },
    "/api/v1/entitlements": {
      "get": {
        "summary": "List entitlements",
        "description": "Returns the authenticated user's entitlements",
        "tags": ["Commerce"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Entitlements retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Entitlement"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/entitlements/grant": {
      "post": {
        "summary": "Grant entitlement",
        "description": "Grants an entitlement to a user (internal use)",
        "tags": ["Commerce"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GrantEntitlementRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Entitlement granted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Entitlement"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders": {
      "get": {
        "summary": "List orders",
        "description": "Returns the authenticated user's orders",
        "tags": ["Commerce"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Orders retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedOrdersResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/{orderId}": {
      "get": {
        "summary": "Get order",
        "description": "Returns a specific order",
        "tags": ["Commerce"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "orderId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Order retrieved"
          },
          "404": {
            "description": "Order not found"
          }
        }
      }
    },
    "/api/v1/refunds": {
      "get": {
        "summary": "List refunds",
        "description": "Returns the authenticated user's refund history",
        "tags": ["Commerce"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Refunds retrieved"
          }
        }
      }
    },
    "/api/v1/debt": {
      "get": {
        "summary": "Get debt status",
        "description": "Returns the authenticated user's debt status from clawbacks",
        "tags": ["Commerce"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Debt status retrieved"
          }
        }
      }
    },
    "/api/v1/refunds/webhook/steam": {
      "post": {
        "summary": "Steam refund webhook",
        "description": "Webhook endpoint for Steam refund notifications",
        "tags": ["Commerce"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefundWebhookRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Refund processed"
          }
        }
      }
    },
    "/api/v1/refunds/webhook/epic": {
      "post": {
        "summary": "Epic refund webhook",
        "description": "Webhook endpoint for Epic refund notifications",
        "tags": ["Commerce"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefundWebhookRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Refund processed"
          }
        }
      }
    },
    "/api/v1/ugc/upload": {
      "post": {
        "summary": "Request UGC upload URL",
        "description": "Requests a presigned URL for uploading UGC content",
        "tags": ["UGC"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UploadUGCRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload URL generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadUGCResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ugc/{ugcId}/publish": {
      "post": {
        "summary": "Publish UGC",
        "description": "Publishes uploaded UGC content",
        "tags": ["UGC"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "ugcId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PublishUGCRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "UGC published and queued for scanning"
          }
        }
      }
    },
    "/api/v1/ugc": {
      "get": {
        "summary": "List user's UGC",
        "description": "Returns the authenticated user's UGC items",
        "tags": ["UGC"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "UGC items retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedUGCResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ugc/discovery": {
      "get": {
        "summary": "Discover UGC",
        "description": "Discovers public UGC content with filtering and sorting",
        "tags": ["UGC"],
        "parameters": [
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["mod", "image", "video", "map", "text"]
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["newest", "trending", "top_rated"],
              "default": "newest"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Discovery results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedUGCResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ugc/{ugcId}": {
      "get": {
        "summary": "Get UGC item",
        "description": "Returns a specific UGC item",
        "tags": ["UGC"],
        "parameters": [
          {
            "name": "ugcId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "UGC item retrieved"
          },
          "404": {
            "description": "UGC not found"
          }
        }
      }
    },
    "/api/v1/ugc/{ugcId}/rate": {
      "post": {
        "summary": "Rate UGC",
        "description": "Rates a UGC item",
        "tags": ["UGC"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "ugcId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RateUGCRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rating submitted"
          }
        }
      }
    },
    "/api/v1/ugc/{ugcId}/report": {
      "post": {
        "summary": "Report UGC",
        "description": "Reports a UGC item for moderation",
        "tags": ["UGC"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "ugcId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReportUGCRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Report submitted"
          }
        }
      }
    },
    "/api/v1/admin/users": {
      "get": {
        "summary": "List users",
        "description": "Returns all users (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Users retrieved"
          }
        }
      }
    },
    "/api/v1/admin/users/{userId}": {
      "get": {
        "summary": "Get user details",
        "description": "Returns detailed user information (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User details retrieved"
          }
        }
      },
      "put": {
        "summary": "Update user roles",
        "description": "Updates a user's roles (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRolesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User roles updated"
          }
        }
      }
    },
    "/api/v1/admin/ugc/moderation-queue": {
      "get": {
        "summary": "Get moderation queue",
        "description": "Returns UGC items pending moderation (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Moderation queue retrieved"
          }
        }
      }
    },
    "/api/v1/admin/ugc/{ugcId}/moderate": {
      "put": {
        "summary": "Moderate UGC",
        "description": "Approves, rejects, or flags a UGC item (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "ugcId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ModerateUGCRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "UGC moderated"
          }
        }
      }
    },
    "/api/v1/admin/support/threads": {
      "get": {
        "summary": "List support threads",
        "description": "Returns all support threads (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["open", "pending", "resolved", "closed"]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Support threads retrieved"
          }
        }
      }
    },
    "/api/v1/admin/support/threads/{threadId}/reply": {
      "post": {
        "summary": "Reply to support thread",
        "description": "Adds an admin reply to a support thread (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "threadId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReplySupportThreadRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Reply sent"
          }
        }
      }
    },
    "/api/v1/admin/orders": {
      "get": {
        "summary": "List all orders",
        "description": "Returns all orders (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Orders retrieved"
          }
        }
      }
    },
    "/api/v1/admin/refunds": {
      "get": {
        "summary": "List all refunds",
        "description": "Returns all refunds (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Refunds retrieved"
          }
        }
      }
    },
    "/api/v1/admin/refunds/manual": {
      "post": {
        "summary": "Process manual refund",
        "description": "Processes a manual refund (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ManualRefundRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Refund processed"
          }
        }
      }
    },
    "/api/v1/admin/audit-logs": {
      "get": {
        "summary": "List audit logs",
        "description": "Returns audit logs (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "resourceType",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Audit logs retrieved"
          }
        }
      }
    },
    "/api/v1/admin/broadcast": {
      "post": {
        "summary": "Send broadcast",
        "description": "Sends a broadcast message to all users (admin only)",
        "tags": ["Admin"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BroadcastRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Broadcast sent"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT authorization header. Example: Authorization: Bearer <token>"
      }
    },
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "healthy"
          },
          "service": {
            "type": "string",
            "example": "api-gateway"
          },
          "version": {
            "type": "string",
            "example": "1.0.0"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "example": "2026-01-30T00:00:00.000Z"
          }
        }
      },
      "ReadinessResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "ready"
          },
          "checks": {
            "type": "object",
            "properties": {
              "database": {
                "type": "boolean",
                "example": true
              },
              "redis": {
                "type": "boolean",
                "example": true
              }
            }
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "example": "UNAUTHORIZED"
              },
              "message": {
                "type": "string",
                "example": "Authentication failed"
              }
            }
          }
        }
      },
      "SteamLoginRequest": {
        "type": "object",
        "required": ["steamId", "ticket"],
        "properties": {
          "steamId": {
            "type": "string",
            "description": "Steam user ID",
            "example": "76561198012345678"
          },
          "ticket": {
            "type": "string",
            "description": "Steam authentication ticket",
            "example": "AAAAAAAAAAAAAA..."
          }
        }
      },
      "EpicLoginRequest": {
        "type": "object",
        "required": ["epicToken", "epicId"],
        "properties": {
          "epicToken": {
            "type": "string",
            "description": "Epic Games authentication token",
            "example": "eyJhbGciOi..."
          },
          "epicId": {
            "type": "string",
            "description": "Epic Games account ID",
            "example": "abc123def456"
          }
        }
      },
      "RefreshTokenRequest": {
        "type": "object",
        "required": ["refreshToken"],
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "Refresh token"
          }
        }
      },
      "RevokeTokenRequest": {
        "type": "object",
        "required": ["refreshToken"],
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "Token to revoke"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "$ref": "#/components/schemas/User"
              },
              "tokens": {
                "$ref": "#/components/schemas/AuthTokens"
              }
            }
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "uuid-string"
          },
          "canonicalId": {
            "type": "string",
            "example": "steam_76561198012345678"
          },
          "displayName": {
            "type": "string",
            "example": "PlayerOne"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["PLAYER", "MODERATOR", "ADMIN"]
            }
          }
        }
      },
      "AuthTokens": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "JWT access token"
          },
          "refreshToken": {
            "type": "string",
            "description": "JWT refresh token"
          },
          "expiresIn": {
            "type": "integer",
            "description": "Access token expiry in seconds",
            "example": 900
          },
          "tokenType": {
            "type": "string",
            "enum": ["Bearer"],
            "example": "Bearer"
          }
        }
      },
      "UserProfileResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "canonicalId": {
                "type": "string"
              },
              "displayName": {
                "type": "string"
              },
              "avatarUrl": {
                "type": "string",
                "nullable": true
              },
              "bio": {
                "type": "string",
                "nullable": true
              },
              "roles": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "identities": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/LinkedIdentity"
                }
              },
              "progression": {
                "$ref": "#/components/schemas/Progression",
                "nullable": true
              },
              "createdAt": {
                "type": "string",
                "format": "date-time"
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time"
              }
            }
          }
        }
      },
      "LinkedIdentity": {
        "type": "object",
        "properties": {
          "provider": {
            "type": "string",
            "enum": ["STEAM", "EPIC"]
          },
          "providerId": {
            "type": "string"
          }
        }
      },
      "UpdateProfileRequest": {
        "type": "object",
        "properties": {
          "displayName": {
            "type": "string"
          },
          "avatarUrl": {
            "type": "string"
          },
          "bio": {
            "type": "string"
          }
        }
      },
      "LinkedAccountsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "linkedAccounts": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "provider": {
                      "type": "string"
                    },
                    "providerId": {
                      "type": "string"
                    },
                    "linkedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              },
              "canUnlink": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "Progression": {
        "type": "object",
        "description": "Player progression data supporting multiple game types. See examples for RPG, FPS, and Strategy games.",
        "properties": {
          "id": {
            "type": "string",
            "example": "prog_12345678-1234-1234-1234-123456789abc"
          },
          "userId": {
            "type": "string",
            "example": "user_12345678-1234-1234-1234-123456789abc"
          },
          "version": {
            "type": "integer",
            "description": "Optimistic locking version for concurrent updates",
            "example": 42
          },
          "displayName": {
            "type": "string",
            "example": "DragonSlayer99"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "example": "https://cdn.example.com/avatars/dragon-slayer.png"
          },
          "bio": {
            "type": "string",
            "nullable": true,
            "example": "Legendary dragon hunter. Always up for a challenge!"
          },
          "level": {
            "type": "integer",
            "description": "Player level (game-specific scale)",
            "example": 47
          },
          "xp": {
            "type": "integer",
            "description": "Experience points",
            "example": 245000
          },
          "achievements": {
            "type": "array",
            "description": "Unlocked achievement IDs",
            "items": {
              "type": "string"
            },
            "example": [
              "ach_dragon_slayer",
              "ach_level_50",
              "ach_first_pvp_victory",
              "ach_collector_100"
            ]
          },
          "currency": {
            "type": "object",
            "description": "In-game currency balance. Game type determines currency types.",
            "additionalProperties": {
              "type": "integer"
            },
            "examples": [
              {
                "gold": 125000,
                "gems": 450,
                "diamonds": 25
              },
              {
                "credits": 50000,
                "scrap": 1200
              },
              {
                "wood": 5000,
                "stone": 3000,
                "gold": 10000
              }
            ]
          },
          "metadata": {
            "type": "object",
            "description": "Game-specific state data. Structure varies by game type.",
            "examples": [
              {
                "gameType": "RPG",
                "characterClass": "Paladin",
                "skills": {
                  "healing": 85,
                  "defense": 92,
                  "attack": 78
                },
                "inventory": {
                  "weapons": [
                    { "id": "sword_001", "name": "Excalibur", "rarity": "legendary" },
                    { "id": "shield_001", "name": "Tower Shield", "rarity": "epic" }
                  ],
                  "potions": 15,
                  "maxSlots": 100
                },
                "quests": {
                  "completed": 156,
                  "active": ["quest_daily_bounty", "quest_main_story_ch7"],
                  "reputation": {
                    "kingdom": 5000,
                    "rogues_guild": 3200
                  }
                },
                "guild": {
                  "name": "Dragon Hunters",
                  "rank": "Commander",
                  "contribution": 45000
                }
              },
              {
                "gameType": "FPS",
                "loadout": {
                  "primary": { "weaponId": "assault_rifle_m4", "attachments": ["scope_4x", "grip"] },
                  "secondary": { "weaponId": "pistol_glock", "attachments": [] },
                  "melee": { "weaponId": "knife_karambit" },
                  "tactical": "flash_grenade",
                  "lethal": "frag_grenade"
                },
                "stats": {
                  "kills": 12450,
                  "deaths": 8200,
                  "wins": 890,
                  "losses": 650,
                  "kd_ratio": 1.52,
                  "accuracy": 0.38,
                  "headshots": 4200
                },
                "unlocks": {
                  "weapons": ["assault_rifle_m4", "sniper_awp", "shotgun_pump"],
                  "cosmetics": ["skin_operative_01", "emote_dance"],
                  "camo_progress": { "gold": 5, "diamond": 2 }
                },
                "prestige": {
                  "level": 15,
                  "prestige_points": 450
                }
              },
              {
                "gameType": "Strategy",
                "factions": {
                  "primary": "Empire",
                  "allies": ["Kingdom", "Undead"],
                  "enemies": ["Orcs", "Demons"]
                },
                "resources": {
                  "food": 50000,
                  "wood": 25000,
                  "stone": 15000,
                  "gold": 75000,
                  "iron": 8000,
                  "oil": 2000
                },
                "buildings": {
                  "town_hall": { "level": 25, "queue": ["barracks", "stable"] },
                  "barracks": { "level": 20, "units": ["infantry", "archers", "knights"] },
                  "wall": { "level": 18, "defense_rating": 850 }
                },
                "army": {
                  "infantry": 500,
                  "archers": 300,
                  "knights": 150,
                  "siege": 20,
                  "total_power": 48500
                },
                "research": {
                  "completed": ["agriculture_III", "masonry_II", "steel_forging"],
                  "in_progress": "advanced_archery",
                  "next_unlock": "ballistics_I"
                },
                "map_progress": {
                  "explored_cells": 1250,
                  "owned_cells": 85,
                  "structures_built": 45
                }
              }
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2025-01-15T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2026-01-30T08:45:30Z"
          }
        }
      },
      "ProgressionUpdate": {
        "type": "object",
        "properties": {
          "displayName": {
            "type": "string"
          },
          "avatarUrl": {
            "type": "string"
          },
          "bio": {
            "type": "string"
          },
          "level": {
            "type": "integer"
          },
          "xp": {
            "type": "integer"
          },
          "achievements": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "currency": {
            "type": "object"
          },
          "metadata": {
            "type": "object"
          },
          "expectedVersion": {
            "type": "integer",
            "description": "Version for optimistic locking"
          }
        }
      },
      "LeaderboardSeason": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "enum": ["global", "regional", "friends"]
          },
          "isActive": {
            "type": "boolean"
          },
          "startsAt": {
            "type": "string",
            "format": "date-time"
          },
          "endsAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateLeaderboardSeasonRequest": {
        "type": "object",
        "required": ["name", "type", "startsAt", "endsAt"],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["global", "regional", "friends"]
          },
          "startsAt": {
            "type": "string",
            "format": "date-time"
          },
          "endsAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LeaderboardEntry": {
        "type": "object",
        "properties": {
          "rank": {
            "type": "integer"
          },
          "userId": {
            "type": "string"
          },
          "score": {
            "type": "number"
          }
        }
      },
      "SubmitScoreRequest": {
        "type": "object",
        "required": ["userId", "score"],
        "properties": {
          "userId": {
            "type": "string"
          },
          "score": {
            "type": "number"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "recipientId": {
            "type": "string"
          },
          "senderId": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string"
          },
          "subject": {
            "type": "string",
            "nullable": true
          },
          "body": {
            "type": "string"
          },
          "metadata": {
            "type": "object",
            "nullable": true
          },
          "isRead": {
            "type": "boolean"
          },
          "isArchived": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaginatedMessagesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Message"
                }
              },
              "total": {
                "type": "integer"
              },
              "page": {
                "type": "integer"
              },
              "pageSize": {
                "type": "integer"
              },
              "totalPages": {
                "type": "integer"
              }
            }
          }
        }
      },
      "SendMessageRequest": {
        "type": "object",
        "required": ["recipientId", "type", "body"],
        "properties": {
          "recipientId": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "subject": {
            "type": "string"
          },
          "body": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "SupportThread": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "subject": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["open", "pending", "resolved", "closed"]
          },
          "priority": {
            "type": "string",
            "enum": ["low", "normal", "high", "urgent"]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "resolvedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "CreateSupportThreadRequest": {
        "type": "object",
        "required": ["subject", "message"],
        "properties": {
          "subject": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "priority": {
            "type": "string",
            "enum": ["low", "normal", "high", "urgent"],
            "default": "normal"
          }
        }
      },
      "ReplySupportThreadRequest": {
        "type": "object",
        "required": ["message"],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "SKU": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "enum": ["durable", "consumable", "subscription"]
          },
          "category": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "currency": {
            "type": "string"
          },
          "metadata": {
            "type": "object",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateSKURequest": {
        "type": "object",
        "required": ["name", "type", "category", "price"],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["durable", "consumable", "subscription"]
          },
          "category": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "currency": {
            "type": "string",
            "default": "USD"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "Entitlement": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "skuId": {
            "type": "string"
          },
          "orderId": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": ["active", "revoked", "expired"]
          },
          "grantedAt": {
            "type": "string",
            "format": "date-time"
          },
          "revokedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "revocationReason": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "GrantEntitlementRequest": {
        "type": "object",
        "required": ["userId", "skuId", "idempotencyKey"],
        "properties": {
          "userId": {
            "type": "string"
          },
          "skuId": {
            "type": "string"
          },
          "orderId": {
            "type": "string"
          },
          "idempotencyKey": {
            "type": "string"
          }
        }
      },
      "Order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "provider": {
            "type": "string",
            "enum": ["STEAM", "EPIC"]
          },
          "providerOrderId": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "verified", "failed", "refunded"]
          },
          "totalAmount": {
            "type": "number"
          },
          "currency": {
            "type": "string"
          },
          "verifiedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "refundedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaginatedOrdersResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Order"
                }
              },
              "total": {
                "type": "integer"
              },
              "page": {
                "type": "integer"
              },
              "pageSize": {
                "type": "integer"
              },
              "totalPages": {
                "type": "integer"
              }
            }
          }
        }
      },
      "RefundWebhookRequest": {
        "type": "object",
        "required": ["orderId", "userId"],
        "properties": {
          "orderId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "amount": {
            "type": "number"
          },
          "currency": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "skuId": {
                  "type": "string"
                },
                "quantity": {
                  "type": "integer"
                }
              }
            }
          }
        }
      },
      "UGCItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "creatorId": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["mod", "image", "video", "map", "text"]
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "type": "string",
            "enum": ["draft", "scanning", "pending_review", "published", "flagged", "removed"]
          },
          "visibility": {
            "type": "string",
            "enum": ["public", "private", "friends_only"]
          },
          "downloadCount": {
            "type": "integer"
          },
          "ratingSum": {
            "type": "integer"
          },
          "ratingCount": {
            "type": "integer"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaginatedUGCResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/UGCItem"
                }
              },
              "total": {
                "type": "integer"
              },
              "page": {
                "type": "integer"
              },
              "pageSize": {
                "type": "integer"
              },
              "totalPages": {
                "type": "integer"
              }
            }
          }
        }
      },
      "UploadUGCRequest": {
        "type": "object",
        "required": ["type", "name", "filename", "contentType", "size", "checksum"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["mod", "image", "video", "map", "text"]
          },
          "name": {
            "type": "string"
          },
          "filename": {
            "type": "string"
          },
          "contentType": {
            "type": "string"
          },
          "size": {
            "type": "integer"
          },
          "checksum": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "UploadUGCResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "ugcId": {
                "type": "string"
              },
              "uploadUrl": {
                "type": "string"
              },
              "expiresIn": {
                "type": "integer"
              },
              "storagePath": {
                "type": "string"
              }
            }
          }
        }
      },
      "PublishUGCRequest": {
        "type": "object",
        "required": ["checksum"],
        "properties": {
          "checksum": {
            "type": "string"
          }
        }
      },
      "RateUGCRequest": {
        "type": "object",
        "required": ["rating"],
        "properties": {
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          }
        }
      },
      "ReportUGCRequest": {
        "type": "object",
        "required": ["reason"],
        "properties": {
          "reason": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "UpdateUserRolesRequest": {
        "type": "object",
        "required": ["roles"],
        "properties": {
          "roles": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["PLAYER", "MODERATOR", "ADMIN"]
            }
          }
        }
      },
      "ModerateUGCRequest": {
        "type": "object",
        "required": ["action"],
        "properties": {
          "action": {
            "type": "string",
            "enum": ["approve", "reject", "flag"]
          },
          "reason": {
            "type": "string"
          },
          "notes": {
            "type": "string"
          }
        }
      },
      "ManualRefundRequest": {
        "type": "object",
        "required": ["orderId", "reason"],
        "properties": {
          "orderId": {
            "type": "string"
          },
          "reason": {
            "type": "string"
          }
        }
      },
      "BroadcastRequest": {
        "type": "object",
        "required": ["subject", "body"],
        "properties": {
          "subject": {
            "type": "string"
          },
          "body": {
            "type": "string"
          }
        }
      }
    }
  }
}
